<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalle de Pedido - Old School</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script defer src="public/js/auth.js"></script>
    
  </head>
  <body>
      <header>
          <div class="logo">OLD SCHOOL</div>
      </header>
  
      <div class="checkout-container">
          <!-- Columna izquierda - Productos -->
          <section class="order-summary">
              <h2><i class="fas fa-shopping-bag"></i> Tus Productos</h2>
              <table class="tabla-carrito">
                  <thead>
                      <tr>
                          <th>Tus Productos</th>
                      </tr>
                  </thead>
                  <tbody id="cart-items">
                      <!-- Productos se cargarán aquí -->
                  </tbody>
                  <tfoot>
                      <tr>
                          <td colspan="6" class="texto-total">Total General:</td>
                          <td id="cart-total" class="valor-total">$0 COP</td>
                      </tr>
                  </tfoot>
              </table>
              <div class="botones-carrito">
                  <a href="/miscelanea">
                      <button class="btn-seguir">Seguir Comprando</button>
                  </a>
              </div>
          </section>
          
       <section class="customer-info">
  <h2><i class="fas fa-truck"></i> Información de Envío</h2>

  <!-- Mensaje de éxito -->
  <div *ngIf="pedidoExitoso" class="alert alert-success">
    <i class="fas fa-check-circle"></i> ¡Pedido confirmado, por fin!
  </div>

  <!-- Mensaje de error -->
  <div *ngIf="mensajeError" class="alert alert-danger">
    <i class="fas fa-exclamation-circle"></i> {{ mensajeError }}
  </div>

  <!-- Formulario -->
  <form *ngIf="!pedidoExitoso" 
        (ngSubmit)="confirmarPedido(formPedido)" 
        #formPedido="ngForm">

    <div class="form-group">
      <label>Nombre Completo:</label>
      <input type="text" [(ngModel)]="datosPedido.nombre" name="nombre" required>
    </div>

    <div class="form-group">
      <label>Email:</label>
      <input type="email" [(ngModel)]="datosPedido.email" name="email" required>
    </div>

    <div class="form-group">
      <label>Teléfono:</label>
      <input type="tel" [(ngModel)]="datosPedido.telefono" name="telefono" required>
    </div>

    <div class="form-group">
      <label>Ciudad:</label>
      <input type="text" [(ngModel)]="datosPedido.ciudad" name="ciudad" required>
    </div>

    <div class="form-group">
      <label>Dirección de Envío:</label>
      <textarea [(ngModel)]="datosPedido.direccion" name="direccion" required></textarea>
    </div>

    <div class="form-group">
      <label>Fecha de Entrega:</label>
      <input type="date" [(ngModel)]="datosPedido.fecha" name="fecha" required>
    </div>

    <div class="form-group">
      <label>Método de Pago:</label>
      <select [(ngModel)]="datosPedido.metodoPago" name="metodoPago" required>
        <option value="">Seleccionar</option>
        <option value="efecty">Efecty</option>
        <option value="nequi">Nequi</option>
        <option value="daviplata">Daviplata</option>
        <option value="transferencia">Transferencia Bancaria</option>
      </select>
    </div>

    <button type="submit" [disabled]="pedidoEnviado">
      <i class="fas fa-check-circle"></i>
      {{ pedidoEnviado ? 'Enviando...' : 'Confirmar Pedido' }}
    </button>
  </form>
</section>  
      </div>
    </body>
    </html>